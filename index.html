<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PU5C1VER5E</title>

  <!-- DOS-ish font close to retro terminals -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

  <style>
    :root{
      /* ====== TWEAK THESE 4 VALUES to align the “screen window” perfectly inside your monitor-frame.png ====== */
      --screen-left: 17%;
      --screen-top: 15%;
      --screen-w: 66%;
      --screen-h: 70%;

      --screen-radius: 18px;

      --green: rgba(120, 255, 160, .95);
      --green-dim: rgba(120, 255, 160, .55);
      --glass: rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background: radial-gradient(circle at 50% 40%, #0c120d 0%, #050705 40%, #000 100%);
      display:grid;
      place-items:center;
      overflow:hidden;
      color: var(--green);
      font-family: "VT323", monospace;
      letter-spacing: .5px;
    }

    /* Stage holds the monitor+screen */
    .stage{
      position:relative;
      width:min(980px, 92vw);
      aspect-ratio: 4 / 3;
      filter: drop-shadow(0 35px 70px rgba(0,0,0,.65));
    }

    /* Monitor frame image */
    .monitor{
      position:absolute;
      inset:0;
      background: url("./monitor-frame.png") center/contain no-repeat;
      pointer-events:none;
      z-index: 30;
    }

    /* Screen window inside monitor */
    .screen{
      position:absolute;
      left: var(--screen-left);
      top: var(--screen-top);
      width: var(--screen-w);
      height: var(--screen-h);
      border-radius: var(--screen-radius);
      overflow:hidden;

      background: radial-gradient(ellipse at center, rgba(12,26,12,.75) 0%, rgba(0,0,0,.92) 68%, rgba(0,0,0,.98) 100%);
      box-shadow:
        inset 0 0 0 1px rgba(120,255,160,.10),
        inset 0 0 50px rgba(120,255,160,.06),
        0 0 90px rgba(120,255,160,.08);

      z-index: 10;
    }

    /* CRT scanlines + vignette */
    .screen::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,.55) 78%),
        repeating-linear-gradient(
          to bottom,
          rgba(0,0,0,.00) 0px,
          rgba(0,0,0,.00) 2px,
          rgba(0,0,0,.14) 3px
        );
      opacity:.55;
      pointer-events:none;
      mix-blend-mode:multiply;
      z-index: 25;
    }

    /* Subtle screen “bloom” */
    .screen::after{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(circle at 50% 45%, rgba(120,255,160,.08), transparent 55%);
      pointer-events:none;
      z-index: 5;
    }

    /* ====== INTRO LAYERS ====== */
    .intro{
      position:absolute;
      inset:0;
      display:block;
      z-index: 2;
    }

    .intro-layer{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:1;
      transform: translateZ(0);
      z-index: 2;
      filter: contrast(1.05) brightness(.98);
    }

    .ufo{
      position:absolute;
      left: 50%;
      top: 41%;
      width: 48%;
      max-width: 360px;
      transform: translate(-50%, -50%);
      opacity: .92;
      z-index: 4;
      animation: hover 1.8s ease-in-out infinite;
      filter: drop-shadow(0 0 12px rgba(120,255,160,.25));
      pointer-events:none;
    }
    @keyframes hover{
      0%,100%{ transform: translate(-50%, -50%) translateY(0px); }
      50%{ transform: translate(-50%, -50%) translateY(-8px); }
    }

    /* ====== BEAM FRAMES ====== */
    .beam{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:0;
      z-index: 6;
      pointer-events:none;
      transition: opacity 120ms linear;
      filter: brightness(1.05);
    }

    /* ====== ACCESS UI ====== */
    .access{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      z-index: 12;
      opacity:0;
      pointer-events:none;
      transition: opacity 450ms ease;
    }
    .access.show{
      opacity:1;
      pointer-events:auto;
    }

    .access-panel{
      width:min(520px, 88%);
      padding: 18px 18px 16px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(120,255,160,.22);
      border-radius: 14px;
      box-shadow:
        inset 0 0 0 1px rgba(120,255,160,.08),
        0 0 40px rgba(120,255,160,.10);
      backdrop-filter: blur(2px);
    }

    .line{
      font-size: 26px;
      color: var(--green);
      text-shadow: 0 0 10px rgba(120,255,160,.15);
      margin-bottom: 10px;
    }

    .row{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .input{
      flex: 1 1 220px;
      position:relative;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(120,255,160,.22);
      background: rgba(0,0,0,.30);
      box-shadow: inset 0 0 18px rgba(0,0,0,.35);
    }

    input#code{
      width:100%;
      border:0;
      outline:0;
      background:transparent;
      color: var(--green);
      font-family: "VT323", monospace;
      font-size: 28px;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding-right: 14px;
    }

    .cursor{
      position:absolute;
      right: 12px;
      top: 50%;
      width: 10px;
      height: 24px;
      transform: translateY(-50%);
      background: rgba(120,255,160,.9);
      animation: blink 0.9s steps(2) infinite;
      border-radius: 2px;
    }
    @keyframes blink{ 50%{ opacity:0; } }

    #enterBtn{
      flex: 0 0 auto;
      font-family: "VT323", monospace;
      font-size: 24px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(120,255,160,.28);
      background: rgba(0,0,0,.28);
      color: var(--green);
      cursor:pointer;
      transition: transform .08s ease, background .2s ease;
    }
    #enterBtn:hover{ background: rgba(0,0,0,.40); }
    #enterBtn:active{ transform: translateY(1px); }

    .hint{
      margin-top: 10px;
      font-size: 18px;
      color: rgba(120,255,160,.55);
    }

    .shake{
      animation: shake .22s linear 2;
    }
    @keyframes shake{
      0%{ transform: translateX(0); }
      25%{ transform: translateX(-6px); }
      50%{ transform: translateX(6px); }
      75%{ transform: translateX(-4px); }
      100%{ transform: translateX(0); }
    }

    /* ====== VIMEO ====== */
    .vimeo{
      position:absolute;
      inset:0;
      z-index: 20;
      opacity:0;
      pointer-events:none;
      transition: opacity 350ms ease;
      background: rgba(0,0,0,.15);
    }
    .vimeo.show{
      opacity:1;
      pointer-events:auto;
    }
    .vimeo iframe{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
    }

    /* Small screens: nudge stage down a hair */
    @media (max-width: 560px){
      .stage{ width: 96vw; }
      .line{ font-size: 22px; }
      input#code{ font-size: 24px; }
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="screen" id="screen">

      <!-- INTRO -->
      <div class="intro" id="intro">
        <img class="intro-layer" src="./intro-bg.png" alt="" />
        <img class="ufo" id="ufo" src="./ufo.png" alt="" />

        <!-- Beam frames (8) -->
        <img class="beam" src="./beam-01.png" alt="" />
        <img class="beam" src="./beam-02.png" alt="" />
        <img class="beam" src="./beam-03.png" alt="" />
        <img class="beam" src="./beam-04.png" alt="" />
        <img class="beam" src="./beam-05.png" alt="" />
        <img class="beam" src="./beam-06.png" alt="" />
        <img class="beam" src="./beam-07.png" alt="" />
        <img class="beam" src="./beam-08.png" alt="" />

        <!-- Optional “all beam” flashes -->
        <img class="beam" id="beamAll" src="./beamall.png" alt="" />
        <img class="beam" id="beamAllGlow" src="./beamall-glow.png" alt="" />
      </div>

      <!-- ACCESS UI -->
      <div class="access" id="access">
        <div class="access-panel" id="accessPanel">
          <div class="line">ACCESS CODE:</div>
          <div class="row">
            <div class="input">
              <input id="code" autocomplete="off" spellcheck="false" inputmode="text" />
              <div class="cursor" aria-hidden="true"></div>
            </div>
            <button id="enterBtn">ENTER</button>
          </div>
          <div class="hint" id="hint">[ Clearance: Restricted ]</div>
        </div>
      </div>

      <!-- VIMEO -->
      <div class="vimeo" id="vimeo">
        <!-- Your Vimeo embed (responsive, fills screen window) -->
        <iframe
          src="https://player.vimeo.com/video/1128635365?badge=0&autopause=0&autoplay=1&muted=0&player_id=0&app_id=58479"
          allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          title="Blinky DOS">
        </iframe>
      </div>

    </div>

    <div class="monitor"></div>
  </div>

  <script>
    // ========= TIMING (tweak if you want) =========
    const INTRO_HOLD_MS   = 1400;  // “few beats” with intro + hovering UFO
    const BEAM_STEP_MS    = 170;   // how fast beam frames step (lower = faster)
    const AFTER_BEAM_MS   = 250;   // tiny pause after last beam frame
    const FLASH_ALL_MS    = 160;   // beamall flash duration
    const FLASH_GLOW_MS   = 220;   // glow flash duration
    const FADE_OUT_MS     = 520;   // fade intro away into access UI

    const CORRECT_CODE = "PROBE";

    const intro  = document.getElementById("intro");
    const ufo    = document.getElementById("ufo");
    const beams  = Array.from(intro.querySelectorAll(".beam"))
                        // first 8 are the step frames; last two are beamAll + glow
                        .filter((img) => img.id !== "beamAll" && img.id !== "beamAllGlow");

    const beamAll = document.getElementById("beamAll");
    const beamAllGlow = document.getElementById("beamAllGlow");

    const access = document.getElementById("access");
    const codeInput = document.getElementById("code");
    const enterBtn = document.getElementById("enterBtn");
    const accessPanel = document.getElementById("accessPanel");
    const hint = document.getElementById("hint");

    const vimeo = document.getElementById("vimeo");

    function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

    function hideAllBeams(){
      beams.forEach(b => b.style.opacity = 0);
      beamAll.style.opacity = 0;
      beamAllGlow.style.opacity = 0;
    }

    async function playBeamSequenceAccumulate(){
      // Shows beam-01, then beam-02 (hiding previous), etc.
      hideAllBeams();

      for (let i = 0; i < beams.length; i++){
        if (i > 0) beams[i-1].style.opacity = 0;
        beams[i].style.opacity = 1;
        await sleep(BEAM_STEP_MS);
      }

      await sleep(AFTER_BEAM_MS);

      // quick “all beam” flash + glow
      beams[beams.length - 1].style.opacity = 0;
      beamAll.style.opacity = 1;
      await sleep(FLASH_ALL_MS);
      beamAll.style.opacity = 0;
      beamAllGlow.style.opacity = 1;
      await sleep(FLASH_GLOW_MS);
      beamAllGlow.style.opacity = 0;
    }

    async function transitionToAccess(){
      // Fade intro layers out, then show access
      intro.style.transition = `opacity ${FADE_OUT_MS}ms ease`;
      intro.style.opacity = 0;

      await sleep(Math.max(200, FADE_OUT_MS - 120));
      access.classList.add("show");
      codeInput.focus();
    }

    function showVimeo(){
      access.classList.remove("show");
      vimeo.classList.add("show");
    }

    function wrongCode(){
      hint.textContent = "[ ACCESS DENIED ]";
      accessPanel.classList.remove("shake");
      // restart the shake animation
      void accessPanel.offsetWidth;
      accessPanel.classList.add("shake");

      setTimeout(() => { hint.textContent = "[ Clearance: Restricted ]"; }, 900);
      codeInput.select();
    }

    function checkCode(){
      const value = (codeInput.value || "").trim().toUpperCase();
      if (value === CORRECT_CODE){
        showVimeo();
      } else {
        wrongCode();
      }
    }

    enterBtn.addEventListener("click", checkCode);
    codeInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkCode();
    });

    // ========= MAIN SEQUENCE =========
    (async function boot(){
      // Make sure everything starts clean
      intro.style.opacity = 1;
      access.classList.remove("show");
      vimeo.classList.remove("show");
      hideAllBeams();

      // Hold on the intro (your image) with UFO hover
      await sleep(INTRO_HOLD_MS);

      // Beam animation
      await playBeamSequenceAccumulate();

      // Transition to access box
      await transitionToAccess();
    })();
  </script>
</body>
</html>
