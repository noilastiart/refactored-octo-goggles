<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PU5C1VER5E — Restricted</title>

  <!-- Optional: closer “terminal” vibe -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

  <style>
    :root{
      /* === SCREEN WINDOW TUNING ===
         These MUST match the monitor-frame.png “glass” area.
         Adjust these 4 values until it lines up perfectly. */
      --screen-left: 16.7%;
      --screen-top: 18.4%;
      --screen-w: 66.6%;
      --screen-h: 62.0%;
      --screen-radius: 16px;

      --green: #39ff5a;
      --green-dim: rgba(57,255,90,.55);
      --bg: #050805;
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background: radial-gradient(circle at 50% 35%, rgba(30,70,30,.35), rgba(0,0,0,1) 62%);
      color: var(--green);
      font-family: "VT323", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      overflow:hidden;
    }

    /* Stage centers the monitor */
    .stage{
      position:relative;
      height:100%;
      width:100%;
      display:grid;
      place-items:center;
    }

    .monitor-wrap{
      position:relative;
      width:min(900px, 92vw);
      aspect-ratio: 4 / 3; /* tweak if your monitor frame art is different */
      filter: drop-shadow(0 30px 55px rgba(0,0,0,.65));
    }

    /* The CRT glass area (everything inside here) */
    .screen{
      position:absolute;
      left: var(--screen-left);
      top: var(--screen-top);
      width: var(--screen-w);
      height: var(--screen-h);
      border-radius: var(--screen-radius);
      overflow:hidden;
      background: radial-gradient(ellipse at center, rgba(12,26,12,.75) 0%, rgba(0,0,0,.92) 68%, rgba(0,0,0,.98) 100%);
      box-shadow:
        inset 0 0 0 1px rgba(57,255,90,.10),
        inset 0 0 40px rgba(57,255,90,.08),
        0 0 60px rgba(57,255,90,.08);
    }

    /* Content anchor inside CRT */
    .screen-content{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 24px;
      z-index:1;
    }

    /* Scanlines + vignette (above everything) */
    .screen::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,.55) 78%),
        repeating-linear-gradient(
          to bottom,
          rgba(0,0,0,.00) 0px,
          rgba(0,0,0,.00) 2px,
          rgba(0,0,0,.14) 3px
        );
      opacity:.55;
      pointer-events:none;
      mix-blend-mode:multiply;
      z-index:5;
    }

    /* subtle glow/flicker */
    .screen::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at 50% 35%, rgba(57,255,90,.10), transparent 58%);
      opacity:.8;
      mix-blend-mode: screen;
      pointer-events:none;
      z-index:4;
      animation: flicker 5.5s infinite;
    }
    @keyframes flicker{
      0%,100%{ opacity:.75; }
      50%{ opacity:.95; }
      52%{ opacity:.62; }
      54%{ opacity:.90; }
    }

    /* Monitor frame art above the CRT */
    .monitor{
      position:absolute;
      inset:0;
      background: url("./monitor-frame.png") center/contain no-repeat;
      pointer-events:none;
      z-index:10;
    }

    /* Boot UI layout */
    .boot{
      width:100%;
      height:100%;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap: 14px;
      text-align:center;
      user-select:none;
    }

    .tinyline{
      position:absolute;
      top: 10px;
      left: 14px;
      font-size: 22px;
      letter-spacing: .5px;
      opacity:.9;
    }

    .title{
      font-size: clamp(44px, 7vw, 84px);
      letter-spacing: 2px;
      line-height: .95;
      text-shadow: 0 0 10px rgba(57,255,90,.35);
      margin-top: 26px;
    }

    .subtitle{
      font-size: clamp(18px, 2.3vw, 30px);
      opacity:.9;
      min-height: 34px; /* keeps layout stable while typing */
      text-shadow: 0 0 8px rgba(57,255,90,.20);
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      margin-top: 6px;
      opacity:0;
      transform: translateY(8px);
      transition: opacity 900ms ease, transform 900ms ease;
    }
    .row.revealed{
      opacity:1;
      transform: translateY(0);
    }

    .label{
      font-size: 26px;
      opacity:.9;
    }

    input.code{
      font-family: inherit;
      font-size: 26px;
      color: var(--green);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(57,255,90,.35);
      border-radius: 10px;
      padding: 8px 12px;
      width: min(240px, 52vw);
      outline: none;
      box-shadow: inset 0 0 18px rgba(57,255,90,.10), 0 0 18px rgba(57,255,90,.08);
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    input.code::placeholder{ color: rgba(57,255,90,.35); }

    button.enter{
      font-family: inherit;
      font-size: 26px;
      color: var(--bg);
      background: rgba(57,255,90,.85);
      border: 0;
      border-radius: 10px;
      padding: 10px 14px;
      cursor:pointer;
      box-shadow: 0 0 24px rgba(57,255,90,.25);
    }
    button.enter:hover{ filter: brightness(1.05); }

    .hint{
      position:absolute;
      bottom: 10px;
      left: 0;
      right: 0;
      font-size: 20px;
      opacity:.7;
      text-align:center;
    }

    .hint a{ color: rgba(57,255,90,.95); text-decoration:none; border-bottom:1px dotted rgba(57,255,90,.4); }
    .hint a:hover{ opacity:1; }

    /* Canvas sits behind text in CRT */
    #fx{
      position:absolute;
      inset:0;
      z-index:0;
    }

    /* When we swap to video */
    .video-wrap{
      width:100%;
      height:100%;
      display:flex;
      align-items:stretch;
      justify-content:stretch;
    }
    .video-wrap iframe{
      width:100%;
      height:100%;
      border:0;
    }

    .errorflash{
      animation: err 420ms ease 0s 2;
    }
    @keyframes err{
      0%,100%{ filter:none; }
      50%{ filter: hue-rotate(80deg) brightness(1.1); }
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="monitor-wrap">
      <div class="screen" id="screen">
        <canvas id="fx"></canvas>

        <div class="screen-content">
          <div class="boot" id="boot">
            <div class="tinyline">&gt;&gt; LINK ESTABLISHED...</div>

            <div class="title" id="title">PU5C1VER5E</div>

            <div class="subtitle" id="subtitle"></div>

            <div class="row" id="gate">
              <div class="label">ACCESS CODE:</div>
              <input class="code" id="code" placeholder="•••••" autocomplete="off" />
              <button class="enter" id="enter">ENTER</button>
            </div>

            <div class="hint">
              Don’t have the code? Request access:
              <a href="mailto:descend9down@gmail.com">descend9down@gmail.com</a>
              <br/>
              © descend9down — Prototype materials for private review only.
            </div>
          </div>
        </div>
      </div>

      <div class="monitor"></div>
    </div>
  </div>

  <script>
    // ========= SETTINGS =========
    const ACCESS_CODE = "PROBE";

    // Vimeo embed (same as you pasted). Kept 100% sized inside .screen
    const VIMEO_IFRAME_HTML = `
      <div class="video-wrap">
        <iframe
          src="https://player.vimeo.com/video/1128635365?badge=0&autopause=0&player_id=0&app_id=58479"
          allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          title="Blinky DOS">
        </iframe>
      </div>
    `;

    // Timing (tweakable)
    const UFO_HOLD_MS = 2000;            // "UFO hovering in the middle for like 2 sec"
    const SWARM_DURATION_MS = 2400;      // slightly slower scrawl
    const TYPE_SPEED_MS = 42;            // subtitle typing speed (lower = faster)
    const GATE_REVEAL_DELAY_MS = 650;    // after typing finishes

    // ========= CANVAS FX =========
    const canvas = document.getElementById('fx');
    const screenEl = document.getElementById('screen');
    const ctx = canvas.getContext('2d');

    function resizeCanvas(){
      const r = screenEl.getBoundingClientRect();
      canvas.width = Math.max(1, Math.floor(r.width * devicePixelRatio));
      canvas.height = Math.max(1, Math.floor(r.height * devicePixelRatio));
      canvas.style.width = r.width + "px";
      canvas.style.height = r.height + "px";
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Simple "pixel" swarm particles
    const particles = [];
    let t0 = performance.now();
    let animState = "ufo"; // "ufo" -> "swarm" -> "idle" -> "video"

    function rand(min,max){ return Math.random()*(max-min)+min; }

    function drawUFO(){
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;
      ctx.clearRect(0,0,w,h);

      // faint glow
      ctx.save();
      ctx.globalAlpha = 0.25;
      ctx.fillStyle = "#39ff5a";
      ctx.beginPath();
      ctx.ellipse(w*0.5, h*0.42, w*0.18, h*0.10, 0, 0, Math.PI*2);
      ctx.fill();
      ctx.restore();

      // UFO body (stylized silhouette)
      ctx.save();
      ctx.fillStyle = "#39ff5a";
      ctx.globalAlpha = 0.85;

      // dome
      ctx.beginPath();
      ctx.ellipse(w*0.5, h*0.38, w*0.08, h*0.06, 0, 0, Math.PI*2);
      ctx.fill();

      // saucer
      ctx.beginPath();
      ctx.ellipse(w*0.5, h*0.44, w*0.18, h*0.06, 0, 0, Math.PI*2);
      ctx.fill();

      // lights
      ctx.globalAlpha = 0.65;
      for(let i=0;i<7;i++){
        const x = w*(0.38 + i*0.04);
        const y = h*0.455;
        ctx.beginPath();
        ctx.arc(x,y,3,0,Math.PI*2);
        ctx.fill();
      }

      ctx.restore();

      // faint scan "beam"
      ctx.save();
      ctx.globalAlpha = 0.10;
      ctx.fillStyle = "#39ff5a";
      ctx.beginPath();
      ctx.moveTo(w*0.5 - w*0.10, h*0.48);
      ctx.lineTo(w*0.5 + w*0.10, h*0.48);
      ctx.lineTo(w*0.5 + w*0.18, h*0.82);
      ctx.lineTo(w*0.5 - w*0.18, h*0.82);
      ctx.closePath();
      ctx.fill();
      ctx.restore();
    }

    function makeTextTargets(text){
      // Build pixel targets from text using offscreen canvas
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;

      const off = document.createElement('canvas');
      off.width = w;
      off.height = h;
      const oc = off.getContext('2d');

      // draw the title with chunky block feel (we mimic your dotted aesthetic with sampling)
      oc.clearRect(0,0,w,h);
      oc.fillStyle = "#39ff5a";

      // Big title
      const fontSize = Math.min(92, Math.max(56, w*0.14));
      oc.font = `700 ${fontSize}px VT323, monospace`;
      oc.textAlign = "center";
      oc.textBaseline = "middle";
      oc.fillText(text, w*0.5, h*0.52);

      const img = oc.getImageData(0,0,w,h).data;

      const targets = [];
      const step = 6; // bigger = chunkier blocks
      for(let y=0;y<h;y+=step){
        for(let x=0;x<w;x+=step){
          const idx = (y*w + x)*4 + 3; // alpha
          if(img[idx] > 20){
            targets.push({x, y});
          }
        }
      }
      return targets;
    }

    function seedSwarm(targets){
      particles.length = 0;

      const w = canvas.clientWidth;
      const h = canvas.clientHeight;

      // particles start from edges (centipede-ish crawl from different areas)
      for(let i=0;i<targets.length;i++){
        const tr = targets[i];

        // spawn from random edge
        const edge = Math.floor(rand(0,4));
        let sx, sy;
        if(edge===0){ sx = rand(-40, w+40); sy = -30; }
        if(edge===1){ sx = w+30; sy = rand(-40, h+40); }
        if(edge===2){ sx = rand(-40, w+40); sy = h+30; }
        if(edge===3){ sx = -30; sy = rand(-40, h+40); }

        particles.push({
          x:sx, y:sy,
          vx:0, vy:0,
          tx: tr.x,
          ty: tr.y,
          // stagger gives that crawling/scrawl feel
          delay: (i % 260) * 3.0,
          alive: true
        });
      }
    }

    function drawSwarm(elapsed){
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;
      ctx.clearRect(0,0,w,h);

      // draw particles
      ctx.save();
      ctx.fillStyle = "#39ff5a";
      ctx.globalAlpha = 0.85;

      const k = 0.08;   // spring strength
      const damp = 0.80;

      let doneCount = 0;

      for(const p of particles){
        const localT = elapsed - p.delay;
        if(localT < 0){
          continue; // not started yet
        }

        // move toward target
        const dx = (p.tx - p.x);
        const dy = (p.ty - p.y);

        p.vx = (p.vx + dx * k) * damp;
        p.vy = (p.vy + dy * k) * damp;

        // add slight wave noise for “crawl”
        p.vx += Math.sin((elapsed*0.01) + p.tx*0.02) * 0.12;
        p.vy += Math.cos((elapsed*0.01) + p.ty*0.02) * 0.12;

        p.x += p.vx;
        p.y += p.vy;

        // draw chunky dot
        ctx.fillRect(p.x, p.y, 3, 3);

        if(Math.abs(dx) < 1.2 && Math.abs(dy) < 1.2){
          doneCount++;
        }
      }

      ctx.restore();

      // If most particles are at rest, we’re effectively done
      const ratio = doneCount / particles.length;
      return ratio > 0.65;
    }

    // ========= BOOT SEQUENCE =========
    const subtitleEl = document.getElementById('subtitle');
    const gateEl = document.getElementById('gate');
    const codeEl = document.getElementById('code');
    const enterBtn = document.getElementById('enter');
    const bootEl = document.getElementById('boot');

    function typeText(el, text, speed){
      el.textContent = "";
      return new Promise(resolve=>{
        let i=0;
        const tick = ()=>{
          el.textContent += text[i];
          i++;
          if(i < text.length) setTimeout(tick, speed);
          else resolve();
        };
        setTimeout(tick, 220);
      });
    }

    async function runBoot(){
      // 1) UFO hover
      animState = "ufo";
      const start = performance.now();
      while(performance.now() - start < UFO_HOLD_MS){
        drawUFO();
        await new Promise(r=>requestAnimationFrame(r));
      }

      // 2) Swarm into PU5C1VER5E
      animState = "swarm";
      const targets = makeTextTargets("PU5C1VER5E");
      seedSwarm(targets);

      const swarmStart = performance.now();
      let settled = false;
      while(!settled && (performance.now() - swarmStart) < (SWARM_DURATION_MS + 1800)){
        const e = performance.now() - swarmStart;
        settled = drawSwarm(e);
        await new Promise(r=>requestAnimationFrame(r));
      }

      // keep final swarm “as title” by stopping canvas clears
      animState = "idle";

      // 3) Type subtitle
      await typeText(subtitleEl, "A Psychospiritual Journey Through the Puscifer Mythos", TYPE_SPEED_MS);

      // 4) Slow reveal password UI
      setTimeout(()=> gateEl.classList.add('revealed'), GATE_REVEAL_DELAY_MS);

      // focus the code field for convenience
      setTimeout(()=> codeEl.focus(), GATE_REVEAL_DELAY_MS + 450);
    }

    // ========= GATE -> VIMEO =========
    function swapToVimeo(){
      animState = "video";
      // stop drawing canvas
      ctx.clearRect(0,0,canvas.clientWidth, canvas.clientHeight);

      // replace boot UI inside screen-content
      const sc = document.querySelector('.screen-content');
      sc.innerHTML = VIMEO_IFRAME_HTML;
    }

    function badCodeFlash(){
      bootEl.classList.remove('errorflash');
      void bootEl.offsetWidth;
      bootEl.classList.add('errorflash');
    }

    function checkCode(){
      const v = (codeEl.value || "").trim().toUpperCase();
      if(v === ACCESS_CODE){
        swapToVimeo();
      }else{
        badCodeFlash();
        codeEl.value = "";
        codeEl.focus();
      }
    }

    enterBtn.addEventListener('click', checkCode);
    codeEl.addEventListener('keydown', (e)=>{
      if(e.key === "Enter") checkCode();
    });

    // Kick it off
    runBoot();
  </script>
</body>
</html>
